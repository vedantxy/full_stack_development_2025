# **Assignment: Full-Stack Tic Tac Toe Multiplayer Application using Next.js and MongoDB Atlas**

### **Objective**

Develop a **full-stack Tic Tac Toe multiplayer web application** using **Next.js (App Router)** and **MongoDB Atlas**.
The application must support two-player gameplay, store all game data in MongoDB, display player history and leaderboards, and demonstrate various Next.js rendering strategies and SEO practices.

---

### **Tech Stack**

* **Framework:** Next.js 14+ (App Router)
* **Database:** MongoDB Atlas
* **ORM:** Mongoose
* **Language:** JavaScript 
* **Styling:** MUI/Tailwind CSS
* **Authentication:** Not required (players identified by username only)

---

### **Project Overview**

Develop a **3x3 Tic Tac Toe game** with the following functionalities:

1. Two players can join or create a game using their usernames.
2. Each game alternates turns between players (X and O).
3. All moves, players, and results are stored in **MongoDB Atlas**.
4. The app displays each player’s **game history** and a **leaderboard** of all players.
5. The app demonstrates all four rendering methods (SSR, CSR, ISR, SSG) and includes SEO metadata setup.

---

### **Rendering and SEO Requirements**

In addition to implementing the main gameplay, students must include the following Next.js concepts in their project:

1. **Server-Side Rendering (SSR):**

   * Use SSR in one route (e.g., `/leaderboard`) to fetch real-time data from MongoDB on every request.

2. **Client-Side Rendering (CSR):**

   * Use CSR in one route (e.g., `/game/[gameId]`) where gameplay updates dynamically using client-side data fetching.

3. **Static Site Generation (SSG):**

   * Use SSG for one route (e.g., `/`) to render static content such as instructions or game introduction.

4. **Incremental Static Regeneration (ISR):**

   * Use ISR in one route (e.g., `/history`) to periodically revalidate game history or player summaries.

5. **SEO & Metadata in Next.js:**

   * Add metadata configuration to enhance page visibility and structure.
   * Each route must include a proper `<title>`, `<meta>` description, and relevant tags.
   * Example:

     ```js
     export const metadata = {
       title: 'Tic Tac Toe Multiplayer | CodingGita',
       description: 'Play Tic Tac Toe online with MongoDB and Next.js',
     }
     ```

---

### **Database Design**

Create three main collections in **MongoDB Atlas**:

1. **Players**

   ```
   {
     username: String (unique),
     wins: Number,
     losses: Number,
     draws: Number
   }
   ```

2. **Games**

   ```
   {
     player1: ObjectId (ref: Player),
     player2: ObjectId (ref: Player),
     status: String ('open' | 'active' | 'finished'),
     winner: ObjectId (ref: Player, optional),
     createdAt: Date,
     endedAt: Date
   }
   ```

3. **Moves**

   ```
   {
     gameId: ObjectId (ref: Game),
     playerId: ObjectId (ref: Player),
     position: Number (0-8),
     timestamp: Date
   }
   ```

---

### **Functional Requirements**

#### **1. Gameplay**

* Two players can join or create a game by entering usernames.
* Each player is assigned **X** or **O**.
* The game validates turns and move positions.
* Game ends when there is a **win** or **draw**.
* Display the current game status dynamically.

---

#### **2. Data Storage**

* All gameplay data must persist in MongoDB Atlas.
* Store move sequences, timestamps, and results.
* Update player stats (wins/losses/draws) when a game ends.

---

#### **3. Game History**

* Provide a history view showing a player’s previous games.
* Display opponent names, results, and dates.
* Include an optional replay feature to view move order.

---

#### **4. Leaderboard**

* Display players ranked by total wins.
* Include username, wins, losses, draws, and win rate.

---

### **Routing Structure**

#### **Static Routes**

| Route          | Description                              |
| -------------- | ---------------------------------------- |
| `/`            | Home page (create/join game, SSG or ISR) |
| `/leaderboard` | Shows global rankings (SSR)              |
| `/history`     | Shows player’s history (ISR)             |

#### **Dynamic Routes**

| Route               | Description                     |
| ------------------- | ------------------------------- |
| `/game/[gameId]`    | Main game board (CSR)           |
| `/history/[gameId]` | Replay page for a specific game |

---

### **API Endpoints**

| Endpoint                   | Method | Description                         |
| -------------------------- | ------ | ----------------------------------- |
| `/api/players`             | GET    | Fetch all players for leaderboard   |
| `/api/players`             | POST   | Create new player (unique username) |
| `/api/games`               | POST   | Create a new game                   |
| `/api/games/open`          | GET    | Fetch list of open games            |
| `/api/games/[gameId]`      | GET    | Fetch details of one game           |
| `/api/games/[gameId]/join` | POST   | Join an open game                   |
| `/api/games/[gameId]/move` | POST   | Submit a move                       |
| `/api/history/[playerId]`  | GET    | Fetch a player’s full game history  |

---

### **MongoDB Atlas Setup**

1. Create a **MongoDB Atlas** account and cluster.
2. Add a database user and whitelist your IP (or use `0.0.0.0/0` for development).
3. Copy the connection URI and save it in `.env.local`:

   ```
   MONGODB_URI=mongodb+srv://student:password@cluster.mongodb.net/tictactoe
   ```
4. Test the connection with a `mongoose.connect()` file before implementing routes.

---
